# --- roles/common/tasks/main.yml ---
---
# Задачи базовой настройки сервера

# Обновляем все пакеты до последних версий
- name: Update system packages
  ansible.builtin.yum:
    name: "*"
    state: latest
    update_cache: true

# Устанавливаем базовые утилиты
- name: Install common packages
  ansible.builtin.yum:
    name: "{{ common_packages }}"
    state: present

# Устанавливаем timezone (важно для логов)
- name: Set timezone
  ansible.builtin.timezone:
    name: "{{ common_timezone }}"

# Создаём базовую директорию для всех сервисов
- name: Ensure base directory exists
  ansible.builtin.file:
    path: "{{ base_dir }}"
    state: directory
    owner: "{{ app_user }}"
    group: "{{ app_user }}"
    mode: '0755'
